// Variables used by Scriptable.
// These must be at the very top of the file. Do not edit.
// icon-color: pink; icon-glyph: book-open;
const e=e=>Number.isFinite(e),t=e=>"string"==typeof e||e instanceof String,r=Boolean,n=e=>{return null===e?"null":Array.isArray(e)?"array":(r=e)instanceof Date||"[object Date]"===Object.prototype.toString.call(r)?"date":t(e)?"string":(e=>e instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(e))(e)?"regexp":e instanceof Map?"map":e instanceof Set?"set":typeof e;var r},a=(e,t,r)=>Math.min(Math.max(e,t),r),o=e=>{const t=a(Math.round(e),0,255).toString(16);return(t.length<2?"0":"")+t},i=(e,t)=>{const{hex:r}=e,n=Number.parseInt(r.slice(0,2),16),a=Number.parseInt(r.slice(2,4),16),i=Number.parseInt(r.slice(4,6),16);return new Color([n,a,i].map(t<0?e=>o((1+t)*e):e=>o((1-t)*e+255*t)).join(""))},s=(e,t=.4)=>i(e,t<0?t:-1*t),l=(e,t=.4)=>i(e,t<0?-1*t:t),c=(e,t=.4)=>(Device.isUsingDarkAppearance()?s:l)(e,t);class d extends Error{payload;constructor(e,t){super(e),this.payload=t}}const h=e=>Object.fromEntries(e),u=(...e)=>t=>e.reduceRight(((e,t)=>t(e)),t),g=e=>t=>(r,n,a)=>t(r,e(n,a),a),p=(e,t)=>[...e,...Array.isArray(t)?t:[t]],m=(e,t)=>e.reduce(t(p),[]),f=(e,t)=>[...Array.from({length:t-e+1}).keys()].map((t=>t+e)),b=e=>Object.entries(e),w=e=>Object.keys(e),y=(e,t)=>t in e,S=e=>e.at(-1),_=e=>e.reduce(((e,t)=>e+t),0),C=(e,n)=>{const a=e.filter(r);return t(n)?a.join(n):a},T=(e,t,r)=>{const n=t[e];(e=>void 0!==e)(n)&&(r[e]=n)},D=(e,t)=>{((e,t=[])=>{const r=new Notification;for(const t of w(e))T(t,e,r);for(const{title:e,url:n,destructive:a=!1}of t)r.addAction(e,n,a);return r})({title:e,body:t}).schedule()},k=(...e)=>t=>e.reduce(((e,t)=>t(e)),t),v=k;class E{label;isDynamic;colorObj;constructor({label:e,lightColor:t,darkColor:r,staticColor:n}){if(this.label=e,this.isDynamic=Boolean(t&&r),!n&&!this.isDynamic)throw new Error(`Color ${e}: must provide more color data`);this.colorObj={light:t,dark:r,static:n}}get color(){return this.isDynamic?Color.dynamic(this.lightColor,this.colorObj.dark):this.colorObj.static}get lightColor(){return this.colorObj.light||this.colorObj.static}get darkColor(){return this.colorObj.dark||this.colorObj.static}}const R=([e])=>new Color(e),x=e=>e instanceof E,F={white:R`ffffff`,black:R`000000`,grayMinus3:R`fdfdfd`,grayMinus2:R`fcfcfc`,grayMinus1:R`fbfbfb`,gray0:R`efefef`,gray1:R`d8d8d8`,gray2:R`c2c2c2`,gray3:R`adadad`,gray4:R`979797`,gray5:R`6c6c6c`,gray6:R`414141`,gray7:R`2b2b2b`,gray8:R`161616`,red_l4:R`e3949e`,red_l3:R`da717e`,red_l2:R`d14d5e`,red_l1:R`c33245`,red:R`a12a3a`,red_d1:R`82212e`,red_d2:R`611923`,yellow_l3:R`eae5d6`,yellow_l2:R`ddd4bb`,yellow_l1:R`cfc3a0`,yellow:R`bcab79`,yellow_d1:R`b4a16a`,yellow_d2:R`a38f52`,dark_green_l2:R`4f6769`,dark_green_l1:R`3d5051`,dark_green:R`253031`,dark_green_d1:R`1a2223`,dark_green_d2:R`121717`,green_l4:R`96babd`,green_l3:R`73a3a7`,green_l2:R`508c91`,green_l1:R`417376`,green:R`315659`,green_d1:R`244042`,green_d2:R`162627`,deep_blue_l2:R`4da5d1`,deep_blue_l1:R`3292c3`,deep_blue:R`2978a0`,deep_blue_d1:R`216282`,deep_blue_d2:R`194961`,blue_l1:R`ebf4ff`,blue:R`c6e0ff`,blue_d1:R`add2ff`,blue_d2:R`85bcff`,umber:R`695958`,black_coffee:R`41393e`,alice_blue:R`e4f0ff`,black_coral:R`4b5463`,platinum:R`e6e8e9`,majorelle_blue:R`4f46e5`,neon_blue:R`6366f1`,magnolia:R`f2f1fd`,ocean_blue:R`4339ca`,slate_100:R`f1f5f9`,slate_700:R`334155`,sky_500:R`0ea5e9`,red_500:R`ef4444`,caribbean_green:R`00d1b2`,jasmine:R`ffe08a`,field_drab:R`574a2b`},O={domain_personal:F.sky_500,domain_work:F.red_500,danger:F.red_500,success:F.caribbean_green,warning:F.jasmine,bg:new E({label:"bg",lightColor:F.white,darkColor:R`1c1c1e`}),primaryTextColor:new E({label:"primaryTextColor",lightColor:F.gray8,darkColor:F.gray1}),secondaryTextColor:new E({label:"secondaryTextColor",lightColor:F.gray5,darkColor:F.gray4}),hr:new E({label:"hr",lightColor:F.gray0,darkColor:F.gray7}),selectedBgColor:new E({label:"selectedBgColor",lightColor:F.gray1,darkColor:F.gray6})},M=[...w(F),...w(O)],P=e=>{if(y(F,e))return F[e];if(y(O,e))return O[e];throw new Error(`No color found for key ${String(e)}`)},I=e=>{const t=P(e);return x(t)?t.color:t},A=(e,r)=>{const n=t(e)?I(e):e,a=t(r)?I(r):r;return Color.dynamic(n,a)},L=()=>h(M.map((e=>[e,I(e)]))),$=e=>{if(6!==e.length)throw new Error("Must be 6 chars");const[t,r,n]=((e,t)=>{let r=[];for(const n of e){const e=S(r);e?r=e.length===t?[...r,[n]]:[...r.slice(0,-1),[...e,n]]:r=[[n]]}return r})([...e],2);return{r:t.join(""),g:r.join(""),b:n.join("")}},N=({r:e,g:t,b:r})=>({r:Number.parseInt(e,16),g:Number.parseInt(t,16),b:Number.parseInt(r,16)}),B=e=>Math.round(e).toString(16).padStart(2,"0"),q=e=>t(e)?e:e.hex,H=({from:e,to:t,numPoints:r})=>{const n=N($(q(e))),a=N($(q(t))),o=1/(r+1);return f(1,r).map((e=>({r:n.r+o*e*(a.r-n.r),g:n.g+o*e*(a.g-n.g),b:n.b+o*e*(a.b-n.b)}))).map((({r:e,g:t,b:r})=>(({r:e,g:t,b:r})=>new Color([e,t,r].join("")))({r:B(Math.floor(e)),g:B(Math.floor(t)),b:B(Math.floor(r))})))};let U={GET_PAGINATED_RESULTS_MAX_LOOPS_BEFORE_WARNING:5,SCREEN_HEIGHT_MEASUREMENTS:{[Device.model()]:{fullscreen:{landscape:Device.screenSize().height,portrait:Device.screenSize().height},notFullscreen:{landscape:Device.screenSize().height,portrait:Device.screenSize().height}}},FULLSCREEN_OPTS_MAX_ON_SCREEN:7,SCRIPTABLE_STORE_PATH:"/var/mobile/Library/Mobile Documents/iCloud~dk~simonbs~Scriptable/Documents/store",PERSISTED_LOG_FILENAME:"persistedLog",PERSISTED_LOG_MAX_LINES:1e3,ICON_TINTING_CACHED_ICON_PATH:"img/sfsymbols",ICON_PRELOAD_LIST_FILENAME:"sfSymbolPreloadList",UI_TABLE_DEFAULT_ROW_HEIGHT:"5%",UI_TABLE_DEFAULT_CELL_WIDTH_PERCENT:10,ON_TAP_CLICK_INTERVAL:200,TIME_PRESETS:[{label:"9:00",targetHourOfDay:9,icon:"clock"}]};const W=e=>{const t=U[e];if(void 0===t)throw new Error(`You must register "${e}" in your implementation before using functions that depend on it.`);return t},j={ADD:"⨁",ARROW_DOWN:"↓",ARROW_RIGHT:"→",ARROW_UP:"↑",BLOCK:"█",CANCEL:"ⓧ",CHECKMARK_GREEN:"✅",CHEVRON_LEFT:"‹",CHEVRON_RIGHT:"›",ELLIPSIS:"…",FOLDER:"📁",HEART:"❤️",MAGNIFYING_GLASS:"🔍",NEST_ARROW:"↳",OPEN_EXTERNAL:" ↗",PAPERCLIP:"📎",PENCIL:"✐",STAR:"✭",VERTICAL_ELLIPSIS:"⋮",PLUS:"+",MINUS:"-"},z=new Set(Object.keys(j)),G=(K=864e5,(e,t)=>Math.floor(((e,t)=>e.getTime()-t.getTime())(e,t)/K));var K;const V=(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate(),Y=e=>[String(e.getHours()).padStart(2,"0"),String(e.getMinutes()).padStart(2,"0")].join(":"),J={YYYYMMDD:e=>[e.toLocaleDateString(void 0,{year:"numeric"}),e.toLocaleDateString(void 0,{month:"2-digit"}),e.toLocaleDateString(void 0,{day:"2-digit"})].join("-"),HHMM:Y,HHMMSS:e=>[Y(e),String(e.getSeconds()).padStart(2,"0")].join(":"),HHMMSSMMM:e=>[Y,String(e.getSeconds()).padStart(2,"0"),String(e.getMilliseconds()).padStart(3,"0")].join(":"),DDDMMMDD:e=>e.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"2-digit"}),MMMDD:e=>e.toLocaleDateString(void 0,{month:"short",day:"2-digit"}),MMDDNum:e=>e.toLocaleDateString(void 0,{month:"2-digit",day:"2-digit"}),MMDDYY:e=>`${e.getMonth()+1}/${e.getDate()}/${String(e.getFullYear()).slice(2)}`,MMDDYYWithPadding:e=>e.toLocaleDateString(void 0,{month:"2-digit",day:"2-digit",year:"2-digit"}),shortMMDDYY:e=>e.toLocaleDateString(void 0,{year:"2-digit",month:"numeric",day:"numeric"}),dayOfWeekNameFull:e=>e.toLocaleString("en-us",{weekday:"long"}),dayOfWeekNameShort:e=>e.toLocaleString("en-us",{weekday:"short"}),longDateAndTime:e=>e.toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1})},Q=(e,t)=>J[t](e),X=(e,{months:t=0,days:r=0,hours:n=0,minutes:a=0,seconds:o=0,ms:i=0}={})=>{const s=new Date(e);return s.setMonth(e.getMonth()+t),s.setDate(e.getDate()+r),s.setHours(e.getHours()+n,e.getMinutes()+a,e.getSeconds()+o,e.getMilliseconds()+i),s};class Z{queue;isRunning=!1;isPaused=!1;interval;maxEntitiesPerOperation;batchOperation;debug;isEqual;constructor({batchOperation:e,initQueue:t=[],interval:r=5e3,maxEntitiesPerOperation:n,debug:a=!1,isEqual:o=((e,t)=>e===t)}){this.queue=t,this.interval=r,this.maxEntitiesPerOperation=n||null,this.batchOperation=e,this.debug=a,this.isEqual=o}debugLog(e){this.debug&&console.log(e)}shiftQueue(){const e=[...this.queue];if(!this.maxEntitiesPerOperation)return this.queue=[],e;const t=e.splice(0,this.maxEntitiesPerOperation);return this.queue=e,t}async run(){if(this.isRunning)throw new Error("Queue already running");if(this.isPaused)throw new Error("Run called while paused");if(0===this.queue.length)return void this.debugLog("Nothing left in queue to run.");this.isRunning=!0;const e=this.shiftQueue();this.debugLog(`Running batch operation on ${e.length} entities, ${this.queue.length} remaining.`),this.queue.length>0&&this.snoozeRun(),e.length>0&&await this.batchOperation(e),this.queue.length>0&&this.snoozeRun(),this.isRunning=!1}snoozeRun(){this.isPaused?this.debugLog("Snooze run called while queue is paused."):((e,t)=>{const r=new Timer;r.timeInterval=e,new Promise((e=>r.schedule((async()=>{t&&await t(),e()}))))})(this.interval,(()=>{0!==this.queue.length?this.isRunning?this.snoozeRun():this.run():this.debugLog("After snoozing, there is nothing left in the queue to run.")}))}push(...e){const t=e.filter((e=>!this.queue.some((t=>this.isEqual(t,e)))));if(0!==t.length){for(const e of t)this.queue.push(e);this.isRunning||this.run()}else this.debugLog("Push: all of the pushed entities are in the queue.")}pause(){this.debugLog("Paused the queue"),this.isPaused=!0}resume(){this.debugLog("Resumed the queue"),this.isPaused=!1,this.isRunning||this.snoozeRun()}}class ee{name;showStreamDataUpdateDebug;data;updateCallbacks=[];updateQueue;constructor({defaultState:e,name:t,showStreamDataUpdateDebug:r=!1}){this.showStreamDataUpdateDebug=r,this.data=e,this.name=t,this.updateCallbacks=[],this.updateQueue=new Z({interval:0,maxEntitiesPerOperation:1,batchOperation:([{reducer:e,suppressChangeTrigger:t}])=>{const r={...this.data},n=e(r);this.data=n,t||this.runCallbacks(r,n)}})}registerUpdateCallback({callback:e,callbackId:t,overwriteExistingCallback:r=!0}){return this.updateCallbacks.some((({id:e})=>e===t))&&!r||(this.updateCallbacks=[...this.updateCallbacks.filter((({id:e})=>e!==t)),{callback:e,id:t}]),{remove:()=>this.unregisterUpdateCallback(t)}}unregisterUpdateCallback(e){this.updateCallbacks=this.updateCallbacks.filter((({id:t})=>t!==e))}runCallbacks(e,t){for(const{callback:r,id:n}of this.updateCallbacks)this.showStreamDataUpdateDebug&&console.log(`Running stream "${this.name}" update callback with ID "${n}"`),r(e,t)}updateData(e,{suppressChangeTrigger:t=!1}={}){this.updateQueue.push({reducer:e,suppressChangeTrigger:t})}setData(e,{suppressChangeTrigger:t=!1}={}){return this.updateData((()=>e),{suppressChangeTrigger:t})}updateAttr(e,t,{suppressChangeTrigger:r=!1}={}){return this.updateData((r=>({...r,[e]:t})),{suppressChangeTrigger:r})}triggerChange(){return this.runCallbacks(this.data,this.data)}getData(){return this.data}dangerouslyClearData(){this.data={}}}const te=async({io:e,path:t})=>{e.isFileDownloaded(t)||await e.downloadFileFromiCloud(t)},re=e=>({useCache:r=false}={})=>{const{cache$:n,defaultData:a}=e;if(r){if(!n)throw new Error("Attempting to get data with cache, but cache is disabled.");return n.getData().data}return new Promise((r=>{(async e=>{const{io:r,path:n,defaultData:a}=e;if(!r.fileExists(n))return null;await te(e);const o=r.readString(n);return t(a)?o:JSON.parse(o)})(e).then((e=>{const t=e??a;n&&n.setData({data:t}),r(t)}))}))},ne=e=>re(e)(),ae=e=>async({data:r})=>{await te(e);const{path:n,prettify:a,io:o,defaultData:i,cache$:s}=e;return o.writeString(n,t(i)?r:JSON.stringify(r,null,a?2:void 0)),s&&s.setData({data:r}),r},oe=(e,t)=>ae(e)({data:t}),ie=e=>()=>e.io.remove(e.path),se=e=>async t=>{const r=await ne(e);await oe(e,t(r))},le=(e,t)=>({useCache:r=false,...n})=>{if(r){const r=(e=>re(e)({useCache:!0}))(e);return t({currData:r,...n})}return new Promise((r=>ne(e).then((e=>r(t({currData:e,...n}))))))},ce=(e,t)=>e===t,de=(e,t,{areEntitiesEqual:r})=>e.some((e=>r(e,t))),he=e=>le(e,(({currData:t,item:r})=>de(t,r,e))),ue=e=>async({item:t})=>{const r=await ne(e);de(r,t,e)||await oe(e,[...r,t])},ge=e=>async({items:t})=>{const r=await ne(e),n=(Array.isArray(t)?t:[t]).filter((t=>!de(r,t,e)));0!==n.length&&await oe(e,[...r,...n])},pe=e=>async({item:t})=>{const r=await ne(e);await oe(e,r.filter((r=>!e.areEntitiesEqual(r,t))))},me=e=>le(e,(({currData:e,predicate:t})=>e.find(t))),fe=e=>le(e,(({currData:e,predicate:t})=>e.some(t))),be=e=>async t=>{const r=(await ne(e)).map(t);await oe(e,r)},we=e=>async t=>{const r=await ne(e);await oe(e,r.filter(t))},ye=e=>le(e,(({currData:e,key:t})=>w(e).includes(t))),Se=e=>le(e,(({currData:e,key:t})=>e[t])),_e=e=>async({key:t,value:r})=>{const n=await ne(e);n[t]=r,await oe(e,n)},Ce=e=>async t=>{const r=await ne(e);delete r[t],await oe(e,r)},Te=e=>{const t=(({filename:e,defaultData:t,directory:r=W("SCRIPTABLE_STORE_PATH"),fileExtension:n="txt",prettify:a=!0,areEntitiesEqual:o=ce,disableCache:i=!1})=>({io:FileManager.iCloud(),path:`${r}/${e}.${n}`,prettify:a,defaultData:t,cache$:i?null:new ee({name:`persisted cache ${e}`,defaultState:{data:t}}),areEntitiesEqual:o}))(e);return{cache$:t.cache$,getData:re(t),write:ae(t),reset:(r=t,()=>oe(r,r.defaultData)),reduce:se(t),deleteFile:ie(t),has:he(t),add:ue(t),concat:ge(t),delete:pe(t),find:me(t),some:fe(t),map:be(t),filter:we(t),hasKey:ye(t),get:Se(t),set:_e(t),deleteObjKey:Ce(t)};var r};Te({filename:"calBlacklistTitles",defaultData:[]});const De=e=>{const t=Device.model(),r=W("SCREEN_HEIGHT_MEASUREMENTS")[t];return r?r[e][Device.screenSize().width>Device.screenSize().height?"landscape":"portrait"]:(D(`No screen height settings for ${t}`),Device.screenSize().height)},ke=(e,t)=>{switch(e){case"default":return t.setDefaultKeyboard();case"email":return t.setEmailAddressKeyboard();case"number":return t.setDecimalPadKeyboard();case"phone":return t.setPhonePadKeyboard();case"url":return t.setURLKeyboard();default:throw new Error(`Unmapped flavor ${String(e)}`)}};var ve=async({title:e,message:t,textFields:r,buttons:n,presentAsSheet:a=!1})=>{const o=new Alert;o.title=e,t&&(o.message=t);const i=r&&w(r);r&&i&&((e,t)=>{for(const{placeholder:r="",initValue:n,flavor:a="default",font:o,textColor:i}of e){const e=t.addTextField(r,n);ke(a,e),o&&(e.font=o),i&&(e.textColor=i)}})(i.map((e=>r[e])),o);const s=w(n);((e,t)=>{for(const{text:r,isCancel:n,isRed:a}of e)n?t.addCancelAction(r):a?t.addDestructiveAction(r):t.addAction(r)})(s.map((e=>({text:e,...n[e]}))),o);const l=a?await o.presentSheet():await o.present(),c=i?((e,t)=>Object.fromEntries(e.map(((e,r)=>[e,t.textFieldValue(r)||null]))))(i,o):{},d=((e,t,r)=>{const n=r.map((e=>({text:e,...t[e]})));if(-1===e){const e=n.find((e=>e.isCancel));if(!e)throw new Error("No cancel button included");return e}const a=n.filter((e=>!e.isCancel))[e];if(!a)throw new Error("Button is not there");return a})(l,n,s);return{textFieldResults:c,tappedButtonText:d.text}};const Ee={},Re=async(e="Confirm action?",{message:t,confirmButtonTitle:r="OK",cancelButtonTitle:n="Cancel",includeCancel:a=!0,presentAsSheet:o=!0,isSubmitRed:i=!1,onConfirm:s,onCancel:l,dontShowAgainKey:c}={})=>{if(Boolean(c&&Ee[c]))return await(s?.()),!0;const d=`${r} (stop asking)`,{tappedButtonText:h}=await ve({title:e,message:t,buttons:{...a&&{[n]:{isCancel:!0}},[r]:{isRed:i},...c&&{[d]:{isRed:i}}},presentAsSheet:o});return h===n?(await(l?.()),!1):(h===d&&(u=!0,Ee[c]=u),await(s?.()),!0);var u},xe=e=>{const t=e.split("\n"),r=W("PERSISTED_LOG_MAX_LINES");return t.length<=r?e:t.slice(t.length-r).join("\n")},Fe=()=>Te({filename:W("PERSISTED_LOG_FILENAME"),defaultData:""});var Oe=async(e,{ignoreLineLimit:r=!1}={})=>{const n=t(e)?e:JSON.stringify(e,null,2),a=Fe(),o=await a.getData(),i=new Date,s=[o,`${`${Q(i,"YYYYMMDD")}, ${Q(i,"HHMM")}`} (${Device.isPhone()?"phone":"iPad"}): ${n}`].filter(Boolean).join("\n");await a.write({data:r?s:xe(s)})};const Me=(e,t)=>{((e,t={})=>{Re(e,{includeCancel:!1,...t})})(`Error in ${t} (see log)`,{message:String(e)}),Oe({type:"Error",error:JSON.stringify(e)})},Pe=e=>{const t=new Timer;return t.timeInterval=e,t.repeats=!0,t},Ie={};class Ae{onFire;onStop;interval;timer;repeatCount;maxRepeatCount;isRunning;fireImmediately;id=UUID.string();constructor({onFire:e,onStop:t,interval:r=1e3,timeout:n=18e5,fireImmediately:a=!1}={}){this.onFire=e,this.onStop=t,this.interval=r,this.timer=Pe(r),this.repeatCount=0,this.maxRepeatCount=n?n/r:null,this.isRunning=!1,this.fireImmediately=a,Ie[this.id]=this}setOnFire(e){this.onFire=e}async start(){if(!this.onFire)throw new Error("Can not start repeatinng timer w/o onFire callback set");this.timer.schedule((async()=>{try{await this.onFire()}catch(e){Me(e,"RepeatingTimer/Scheduled onFire")}this.maxRepeatCount&&(this.repeatCount++,this.repeatCount>=this.maxRepeatCount&&await this.stop())})),this.isRunning=!0;try{this.fireImmediately&&await this.onFire()}catch(e){Me(e,"RepeatingTimer/Start")}}resetCurrent(){if(!this.isRunning)throw new Error("Can not reset a timer that is not running");this.timer.invalidate(),this.timer=Pe(this.interval),this.start()}async stop(){this.timer.invalidate();try{this.onStop&&await this.onStop()}catch(e){Me(e,"RepeatingTimer/stop")}this.isRunning=!1}}var Le={add_event:"calendar.badge.plus",add:"plus",alarm:"alarm",alert:"bell",archive:"archivebox",arrow_left:"arrow.left",arrow_right:"arrow.right",arrow_up:"arrow.up",arrow_uturn_down:"arrow.uturn.down",asterisk:"asterisk",attachment:"paperclip",backlog:"arrowtriangle.left",bell_fill:"bell.fill",bell:"bell",book:"book.closed",bookmark_remove:"bookmark.slash",bookmark:"bookmark",brain:"brain",branch:"arrow.triangle.branch",browser:"safari",bug:"ant",cake:"birthday.cake",calendar_circle:"calendar.circle",calendar:"calendar",cancel:"xmark",car:"car",card_stack:"square.stack.3d.down.right",chat:"bubble.right",checklist_checked:"checklist.checked",checklist:"checklist",checkmark:"checkmark",chevron_down:"chevron.down",chevron_left_fill:"chevron.left.square.fill",chevron_left:"chevron.left",chevron_right_fill:"chevron.right.square.fill",chevron_right:"chevron.right",chevron_up:"chevron.up",circle_done_filled:"checkmark.circle.fill",circle_done:"checkmark.circle",circle_filled:"largecircle.fill.circle",circle:"circle",circled_checkmark_filled:"checkmark.circle.fill",circled_exclamation_filled:"exclamationmark.circle.fill",circled_exclamation:"exclamationmark.circle",circled_question_filled:"questionmark.circle.fill",circled_question:"questionmark.circle",clipboard:"clipboard.fill",clock_fill:"clock.fill",clock:"clock",code:"chevron.left.forwardslash.chevron.right",collapse_vertical:"rectangle.compress.vertical",collapse:"minus.square",comment:"bubble.right",cycle:"arrow.3.trianglepath",danger_question:"questionmark.diamond",dash_list:"list.dash",dashboard:"gauge",delete_event:"calendar.badge.minus",delete_milestone:"flag.slash.circle",delete:"bin.xmark",display:"display",document:"doc",dot_in_circle:"smallcircle.fill.circle",download_local:"square.and.arrow.down",dropdown:"chevron.down.circle",dropright:"chevron.right.circle",dropup:"chevron.up.circle",edit:"pencil",ellipsis_circle:"ellipsis.circle",ellipsis:"ellipsis",email:"envelope",exclamation:"exclamationmark",expand_vertical_2:"chevron.up.chevron.down",expand_vertical:"rectangle.expand.vertical",expand:"plus.square",filter:"line.horizontal.3.decrease.circle",folder_circle:"folder.circle",folder_question:"questionmark.folder.fill",folder:"folder",font:"textformat",fork_knife:"fork.knife",forward:"arrowshape.turn.up.right",future:"chevron.right.2",gift:"gift",go_back:"arrow.left.circle",go_forward:"arrow.right.circle",grid:"rectangle.3.offgrid",hamburger:"text.justify",hashtag:"number",heart:"heart.fill",hide:"eye.slash",home:"house",html_close_tag:"chevron.left.slash.chevron.right",inbox:"tray.and.arrow.down",indented_list:"list.bullet.indent",info:"info.circle",ipad:"ipad",iphone:"iphone",kg:"k.circle",laptop:"laptopcomputer",lightbulb:"lightbulb",link:"link",list_in_circle:"list.bullet.circle",lock:"lock",megaphone:"megaphone",merge:"arrow.triangle.merge",milestone:"flag.circle",money:"dollarsign.square",moon_circle:"moon.circle",no:"nosign",not_downloaded:"icloud.slash",notes:"doc.plaintext",notification:"bell",num_sqr_1:"1.square",num_sqr_10:"10.square",num_sqr_11:"11.square",num_sqr_12:"12.square",num_sqr_13:"13.square",num_sqr_14:"14.square",num_sqr_15:"15.square",num_sqr_2:"2.square",num_sqr_3:"3.square",num_sqr_4:"4.square",num_sqr_5:"5.square",num_sqr_6:"6.square",num_sqr_7:"7.square",num_sqr_8:"8.square",num_sqr_9:"9.square",numbered_list:"list.number",numbers:"textformat.123",open_external:"arrow.up.right",palette:"paintpalette",parent_child_holding_hands:"figure.and.child.holdinghands",party:"party.popper",pause_skinny:"pause",pause:"pause.circle",person:"person",photo:"photo",pin_fill:"pin.fill",pin:"pin",plane:"airplane",play:"play",playing:"figure.play",point:"hand.point.up.left",questionmark:"questionmark",refresh:"arrow.clockwise",reply:"arrowshape.turn.up.left",search_document:"doc.text.magnifyingglass",search:"magnifyingglass",select_all:"square.grid.3x2",send_mail:"paperplane",settings:"gear",share:"square.and.arrow.up",shared_fill:"person.2.fill",shared:"person.2",shopping_add:"cart.badge.plus",shopping:"cart",show:"eye",sleep:"sleep",social_distancing:"figure.stand.line.dotted.figure.stand",sort:"arrow.up.arrow.down",split:"square.split.2x1",square_fill:"square.fill",square:"square",star_circled:"star.circle",star_filled:"star.fill",star:"star",stocks:"chart.line.uptrend.xyaxis",stop_sign:"octagon",stop_with_x:"xmark.octagon",stop:"hand.raised",stream:"water.waves",subtask:"arrow.turn.down.right",sun:"sun.max",sunrise:"sunrise",tag:"tag",task_complete:"checkmark.square",task_incomplete:"square",task_partial:"minus.square",text_box:"textbox",text_cursor:"text.cursor",thermometer:"medical.thermometer",thumbs_down:"hand.thumbsdown",thumbs_up:"hand.thumbsup",timer:"timer",tray_circled:"tray.circle",tray:"tray.fill",turtle:"tortoise",undo:"arrow.uturn.left",unpin_fill:"pin.slash.fill",video:"video",waiting:"hourglass",warning:"exclamationmark.triangle",weight:"scalemass",work:"briefcase",x_in_circle:"xmark.circle",x_in_square:"xmark.square"};const $e=(e,t)=>`${e}--${t}`,Ne=e=>{const[t,r]=e.split("--");return{iconKey:t,color:new Color(r)}},Be=new Set(Object.keys(Le)),qe=e=>Be.has(e),He=(()=>{let e=null;return()=>e||(e=Te({defaultData:{},filename:W("ICON_PRELOAD_LIST_FILENAME")}),e)})(),Ue=()=>({script:Script.name(),mode:Device.isUsingDarkAppearance()?"dark":"light"}),We=e=>{const{script:t,mode:r}=Ue();return n=>{n[t]={light:n[t]?.light??[],dark:n[t]?.dark??[]};return n[t][r].includes(e)||n[t][r].push(e),n}},je=new Z({batchOperation:async e=>{const t=((e,t)=>{const{script:r,mode:n}=Ue();return((e,...t)=>e.filter((e=>!t.includes(e))))(e,...t[r]?.[n]??[])})(e,await He().getData());t.length>0&&await He().reduce(k(...t.map(We)))}}),ze=e=>({isValid:Boolean(e&&e>0),width:e}),Ge=e=>Number.parseInt(e.replaceAll("%","")),Ke=({height:t=W("UI_TABLE_DEFAULT_ROW_HEIGHT"),mode:r})=>e(t)?t:((e,t="notFullscreen")=>{const r=Ge(e);if(r<1||r>100)throw new Error(`Percent value must be between 1-100, actual: ${e}`);const n=r/100;return Math.floor(n*De(t))})(t,r),Ve=(e,t)=>t.isFaded?((e,t)=>H({from:e,to:t,numPoints:1})[0])(e,t.bgColor??I("bg")):e,Ye=({dismissOnTap:e,...t})=>({dismissTableOnTap:e,...t}),Je=(e,t,r)=>{if(!e)return null;const n=t.color,a=n&&Ve(n,t),{color:o,height:i}=((e,t)=>{if(Array.isArray(e)){const[t,r]=e;return{height:t,color:r}}return{height:e,color:t??I("hr")}})(e,a);return Qe({bgColor:o,height:i,...Ye(r)})},Qe=e=>e,Xe=e=>`${e}%`,Ze=e=>{return t=["dismissOnTap","onDoubleTap","onTap","onTripleTap","overrideClickMap"],h(b(e).filter((([e])=>t.includes(e))));var t},et=e=>({DESCRIPTION:String(e),style:e.style,parent:e.parent?et(e.parent):null});class tt{parent=null;style;description="ELEMENT";constructor(e){this.style=e}setParent(e){this.parent=e}setDescription(e){this.description=e}toString(){return this.description}inheritStyle(){if(!this.parent)return;const{debug:e,...t}=this.parent.style;var r;this.style={...t,...this.style},this.style.debug&&(r=et(this),console.log(JSON.stringify(r,null,2)))}render(){throw new Error("Render not implemented")}}let rt=class extends tt{getCellOptsWithCalibratedWidth;constructor({style:e,getCellOptsWithCalibratedWidth:t}){super(e),this.getCellOptsWithCalibratedWidth=t}render(){return this.inheritStyle(),this}};const nt=e=>e instanceof at;class at extends tt{tapProps;children;constructor(e,t,r){super(t),this.tapProps=r,this.children=e;for(const e of this.children)e.setParent(this)}getBgColor(){return this.style.bgColor??I("bg")}wrapRowsWithSpacingAndBorder(e){const{borderBottomRow:t,borderTopRow:r,marginBottomRow:n,marginTopRow:a,paddingBottomRow:o,paddingTopRow:i}=((e,t,r)=>{const n=I("bg"),a=Ye(r),{borderBottom:o,borderTop:i,marginBottom:s,marginTop:l,paddingBottom:c,paddingTop:d}=e;return{paddingTopRow:d&&Qe({height:d,bgColor:t,...a}),paddingBottomRow:c&&Qe({height:c,bgColor:t,...a}),marginTopRow:l&&Qe({height:l,bgColor:n}),marginBottomRow:s&&Qe({height:s,bgColor:n}),borderTopRow:Je(i,e,r),borderBottomRow:Je(o,e,r)}})(this.style,this.getBgColor(),this.tapProps);return C([a,r,i,...e,o,t,n])}getPartialBaseRowOpts(){return{height:Ke(this.style),bgColor:this.getBgColor(),...Ye(this.tapProps)}}render(){if(this.inheritStyle(),0===this.children.length)return this.wrapRowsWithSpacingAndBorder([this.getPartialBaseRowOpts()]);if(this.children.every(nt))return this.wrapRowsWithSpacingAndBorder((e=this.children,e.map(((e,t,r)=>{if(!e.style.borderTop)return e;const n=r[t-1];return n?.style.borderBottom?(Boolean(n.style.marginBottom||e.style.marginTop)||(e.style.borderTop=0),e):e}))).flatMap((e=>(e.tapProps={...this.tapProps,...e.tapProps},e.render()))));var e;if(this.children.some(nt))throw new Error("If a Container has a Container child, all siblings must also be Containers");const t=this.children.flatMap((e=>e.render())),r=(e=>{const t=_(e);return(100===t?e:e.map((e=>e/t*100))).map((e=>Math.floor(e)))})((e=>{const t=e.map(ze),r=t.filter((({isValid:e})=>!e)).length;if(!r)return e;const n=100-_(t.map((({width:e,isValid:t})=>t?e:0)));return t.map((({width:e,isValid:t})=>t?e:n<=0?W("UI_TABLE_DEFAULT_CELL_WIDTH_PERCENT"):n/r))})(t.map((e=>e.style.width?Ge(e.style.width):void 0)))),n={cells:t.map(((e,t)=>{const n=r[t];return e.getCellOptsWithCalibratedWidth(e.style,n)})),...this.getPartialBaseRowOpts()};return this.wrapRowsWithSpacingAndBorder([n])}}class ot extends tt{children;constructor(e,t){super(t),this.children=e;for(const e of this.children)e.setParent(this)}render(){return this.inheritStyle(),this.children.map((e=>e.render()))}}const it=(e,t={})=>{const n=e.filter(r),a=new at(n,t,Ze(t));return a.setDescription(`DIV > shownCells: ${n.length}`),a},st=["onTap","onDoubleTap","onTripleTap","dismissOnTap","overrideClickMap"],lt=e=>{const t={};for(const r of w(e))st.includes(r)||(t[r]=void 0);return t},ct=(e,t={})=>it([it(e,lt(t))],t);let dt=class extends at{constructor(e){super([],e,{}),this.setDescription("HR")}render(){const{bgColor:e=I("hr"),height:t=1,marginTop:r=8,marginBottom:n=8}=this.style;return this.style={...this.style,bgColor:e,height:t,marginTop:r,marginBottom:n},super.render()}};var ht=({color:e,...t}={})=>new dt({bgColor:e,...t});const ut={numShownSteps:2,stepRowHeight:1,fadeUntilPercentOfTo:1},gt=({from:e,mode:t,to:r=I("bg"),stepOptions:{fadeUntilPercentOfTo:n=ut.fadeUntilPercentOfTo,numShownSteps:a=ut.numShownSteps,stepRowHeight:o=ut.stepRowHeight}=ut})=>{const i=Math.floor(a/n),s=H({from:e,to:r,numPoints:i}).slice(0,a).map((e=>ht({height:o,color:e,marginBottom:0,marginTop:0}))),l=it("DOWN"===t?s:s.reverse());return l.setDescription(`GRADIENT > ${t}`),l},pt={textSize:22,fontConstructor:e=>Font.boldSystemFont(e),paddingTop:"md",paddingBottom:"lg"},mt=({color:e,bgColor:r,...n})=>({...n,color:t(e)?I(e):e,bgColor:t(r)?I(r):r}),ft={borderTop:0,borderBottom:0},bt=()=>mt({bgColor:"deep_blue",color:"gray2"}),wt=()=>mt({bgColor:"bg",color:"primaryTextColor"}),yt=()=>mt({bgColor:A("gray0","gray8"),color:"primaryTextColor"}),St={font:pt.fontConstructor},_t=()=>mt({paddingTop:10,paddingBottom:10,height:40,fontSize:22}),Ct=()=>({flavors:{default:yt(),defaultNoBorder:mt({...yt(),...ft}),happy:mt({bgColor:"caribbean_green",color:"white"}),warning:mt({bgColor:"jasmine",color:"field_drab"}),danger:mt({bgColor:"red_500",color:"white"}),transparent:mt({...wt(),...ft}),transparentH1:mt({...wt(),...ft,...St}),transparentWithBorder:mt({...wt()}),serene:bt(),sereneH1:mt({...bt(),...St,...ft}),domainPersonal:mt({bgColor:"domain_personal",color:"white"}),domainWork:mt({bgColor:"domain_work",color:"white"}),primary:mt({bgColor:A("majorelle_blue","neon_blue"),color:A("magnolia","white")}),secondary:mt({bgColor:A("slate_100","black_coral"),color:A("slate_700","platinum")})},button:{default:_t(),large:mt({..._t(),height:50,fontSize:26,paddingTop:20,paddingBottom:20})}}),Tt=e=>{const t=FileManager.iCloud();return t.fileExists(e)||t.createDirectory(e),e},Dt=()=>[W("SCRIPTABLE_STORE_PATH"),W("ICON_TINTING_CACHED_ICON_PATH")].join("/"),kt=new Map,vt=e=>`${Dt()}/${e}.png`,Et=(e,t)=>{Tt(Dt());const r=$e(e,t),n=kt.get(r);if(n)return n;const a=vt(r);return FileManager.iCloud().fileExists(a)?((async(e,t)=>{const r=FileManager.iCloud();r.isFileDownloaded(t)||await r.downloadFileFromiCloud(t);const n=r.readImage(t);if(!n)throw new Error(`Can not load icon ${e}`);kt.set(e,n)})(r,a),"LOADING_FILE"):"FILE_DOES_NOT_EXIST"},Rt=(e,t,r)=>{Tt(Dt());const n=$e(e,t);FileManager.iCloud().fileExists(vt(n))||((e,t)=>{const r=FileManager.iCloud(),n=vt(e);r.writeImage(n,t),kt.set(e,t)})(n,r)},xt=t=>{const r=(e=>!!e&&(!0===e?{}:e))(t);if(!r)return r;const{lower:n,upper:o}=r;return{lower:a(e(n)?n:0,0,1),upper:a(e(o)?o:1,0,1)}},Ft={sfSymbol:{hueMargin:130,lightnessMargin:.4,currentColor:void 0,replaceSaturation:!0,replaceLightness:!0,noWarnings:!0}};var Ot=async(e,n,o="sfSymbol")=>{const i=`\n  <img id="image" src="data:image/png;base64,${Data.fromPNG(e).toBase64String()}" />\n  <canvas id="canvas"></canvas>\n  `,s=((e,{currentColor:t,noWarnings:r,replaceLightness:n,replaceSaturation:a,hueMargin:o,lightnessMargin:i})=>`\nfunction rgbToHsl(r, g, b) {\n    r /= 255, g /= 255, b /= 255;\n    var max = Math.max(r, g, b),\n        min = Math.min(r, g, b);\n    var h, s, l = (max + min) / 2;\n\n    if (max == min) {\n        h = s = 0; // achromatic\n    } else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch (max) {\n            case r:\n                h = (g - b) / d + (g < b ? 6 : 0);\n                break;\n            case g:\n                h = (b - r) / d + 2;\n                break;\n            case b:\n                h = (r - g) / d + 4;\n                break;\n        }\n        h /= 6;\n    }\n\n    return ({\n        h: h,\n        s: s,\n        l: l,\n    });\n}\n\n\nfunction hslToRgb(h, s, l) {\n    var r, g, b;\n\n    if (s == 0) {\n        r = g = b = l; // achromatic\n    } else {\n        function hue2rgb(p, q, t) {\n            if (t < 0) t += 1;\n            if (t > 1) t -= 1;\n            if (t < 1 / 6) return p + (q - p) * 6 * t;\n            if (t < 1 / 2) return q;\n            if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n            return p;\n        }\n\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1 / 3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1 / 3);\n    }\n\n    return ({\n        r: Math.round(r * 255),\n        g: Math.round(g * 255),\n        b: Math.round(b * 255),\n    });\n}\n\nfunction toHex(r, g, b) {\n  return "0x" + r.toString(16) + g.toString(16) + b.toString(16);\n}\n\n\nlet img = document.getElementById("image");\nlet canvas = document.getElementById("canvas");\nlet color = 0x${e.hex};\nlet oldColor = ${JSON.stringify(t.map((e=>e instanceof Color?'"0x'+e.hex+'"':e)))};\nlet targetHsl = rgbToHsl(\n  (color >> 16) & 0xFF,\n  (color >> 8) & 0xFF,\n  color & 0xFF,\n);\ntargetHsl.h *= 360;\nlet oldHsl = oldColor.map(\n  (c) => {\n    if (typeof c === "string") {\n      c = parseInt(c);\n      const hsl = rgbToHsl(\n        (c >> 16) & 0xFF,\n        (c >> 8) & 0xFF,\n        c & 0xFF,\n      );\n      hsl.h *= 360;\n      return hsl;\n    } else {\n      return {\n        h: c,\n        s: 1,\n        l: 0.5,\n      };\n    }\n  }\n);\nconst hasOldColor = oldHsl.length > 0;\n\ncanvas.width = img.width;\ncanvas.height = img.height;\nlet ctx = canvas.getContext("2d");\nctx.drawImage(img, 0, 0);\nlet imgData = ctx.getImageData(0, 0, img.width, img.height);\n// ordered in RGBA format\nlet data = imgData.data;\n\n// order: hue saturation luminance alpha (alpha is not filled)\nconst hslData = new Array(data.length);\nconst colorMap = new Map();\nfor (let i = 0; i < data.length; i += 4) {\n  let hsl = rgbToHsl(data[i + 0], data[i + 1], data[i + 2]);\n  hsl.h *= 360;\n  hslData[i + 0] = hsl.h;\n  hslData[i + 1] = hsl.s;\n  hslData[i + 2] = hsl.l;\n  const hue = Math.round(hsl.h);\n\n  if (!hasOldColor && data[i + 3] > 0) {\n    const current = colorMap.has(hue) ? colorMap.get(hue) : 0;\n    colorMap.set(hue, current + 1);\n  }\n}\n\nlet maxHue = 0;\nlet maxHueCount = 0;\nif (!hasOldColor) {\n  for (const [hue, count] of colorMap) {\n    if (count > maxHueCount) {\n      maxHue = hue;\n      maxHueCount = count;\n    }\n  }\n}\n\nlet warnedAboutGray = ${r};\nlet warnedAboutBlack = ${r};\nconst satBounds = ${JSON.stringify(a)};\nconst lightBounds = ${JSON.stringify(n)};\nfor (let i = 0; i < data.length; i += 4) {\n  if (data[i + 3] === 0) continue;\n  let diff = {\n    h: 0,\n    s: 0,\n    l: 0,\n  };\n  if (hasOldColor) {\n    diff = oldHsl\n      .map((hsl) => {\n        const ret = {\n          h: Math.abs(hslData[i] - hsl.h),\n          s: Math.abs(hslData[i + 1] - hsl.s),\n          l: Math.abs(hslData[i + 2] - hsl.l),\n        };\n        if (ret.h > 180) ret.h = 360 - ret.h;\n        return ret;\n      })\n      .reduce((prev, cur) => !prev ? cur : prev.h < cur.h ? prev : cur);\n  } else {\n    diff.h = Math.abs(hslData[i] - maxHue);\n    if (diff.h > 180) {\n      diff.h = 360 - diff.h;\n    }\n  }\n  if (diff.h < ${o} && diff.l < ${i}) {\n    let sat = hslData[i + 1];\n    if (satBounds && sat >= satBounds.lower && sat <= satBounds.upper) {\n      sat = targetHsl.s;\n    } else if (!satBounds && sat < 0.1 && !warnedAboutGray) {\n      warnedAboutGray = true;\n      logWarning(\n        "[replaceColor()] You tried replacing a grayish color without"\n        + " specifying that its saturation should also be replaced."\n      );\n    }\n    let light = hslData[i + 2];\n    if (\n      lightBounds\n      && light >= lightBounds.lower\n      && light <= lightBounds.upper\n    ) {\n      light = targetHsl.l;\n    } else if (\n      !lightBounds\n      && (light <= 0.1 || light >= 0.9)\n      && !warnedAboutBlack\n    ) {\n      warnedAboutBlack = true;\n      logWarning(\n        "[replaceColor()] You tried replacing a black or white color without"\n        + " specifying that its lightness should also be replaced. You"\n        + " should also specify that its saturation should be replaced, if"\n        + " you haven't done so already."\n      );\n    }\n    const rgb = hslToRgb(targetHsl.h / 360, sat, light);\n    data[i + 0] = rgb.r;\n    data[i + 1] = rgb.g;\n    data[i + 2] = rgb.b;\n  }\n}\nctx.putImageData(imgData, 0, 0);\ncanvas.toDataURL("image/png").replace(/^data:image\\/png;base64,/, "");\n`)(n,(({hueMargin:e,lightnessMargin:t,currentColor:n,replaceSaturation:o,replaceLightness:i,...s})=>({hueMargin:a(e,0,180),lightnessMargin:a(t,0,1),currentColor:(Array.isArray(n)?n:[n]).filter(r),replaceSaturation:xt(o),replaceLightness:xt(i),...s}))(Ft[o])),l=new WebView;await l.loadHTML(i);const c=await l.evaluateJavaScript(s);if(!t(c))throw new Error("Base64 conversion result is not a string");return Image.fromData(Data.fromBase64String(c))};const Mt=(e,r=I("primaryTextColor"))=>{const n=(e=>{const t=SFSymbol.named(Le[e]);if(!t)throw new Error(`Invalid SFSymbol key: ${e}`);return t.applyFont(Font.systemFont(53)),t.applyThinWeight(),t.image})(e);if(!r)return n;const a=r.hex;var o,i;o=e,i=a,je.push($e(o,i));const s=Et(e,a);return t(s)?("FILE_DOES_NOT_EXIST"===s&&(async(e,t,r)=>{const n=await Ot(e,t);Rt(r,t.hex,n)})(n,r,e),n):s},Pt=e=>{const t=(e=>new Z({maxEntitiesPerOperation:20,batchOperation:t=>{var r;m(t,u(g(Ne),(r=({iconKey:e,color:t})=>Mt(e,t),e=>(t,n,a)=>(r(n,a),e(t,n,a))))),e?.()}}))(e);return{preloadIcons:async()=>t.push(...await(async()=>{const{script:e,mode:t}=Ue(),r=await He().getData();return r[e]?.[t]??[]})()),haltIconPreload:()=>t.pause()}};class It extends rt{constructor(e,{doNotTint:t=!1,...r}){super({style:r,getCellOptsWithCalibratedWidth:(r,n)=>{const{align:a="center",color:o=I("primaryTextColor"),font:i=(e=>Font.boldSystemFont(e)),fontSize:s=20}=r,l=Ve(o,r);return qe(e)?{type:"image",value:Mt(e,t?null:l),align:a,widthWeight:n}:{type:"text",value:j[e],align:a,widthWeight:n,color:l,font:i(s)}}})}}var At=(e,t={})=>{const r=new It(e,t);return r.setDescription(`ICON > key: "${e}"`),r};class Lt extends rt{constructor(e,t){super({style:t,getCellOptsWithCalibratedWidth:({align:t="left",color:r=I("primaryTextColor"),font:n=(e=>Font.regularRoundedSystemFont(e)),fontSize:a=20},o)=>{const i=Ve(r,this.style);return{type:"text",value:e,align:t,widthWeight:o,color:i,font:n(a)}}})}}var $t=(e,t={})=>{const r=new Lt(e,t);var n,a;return r.setDescription(`P > text: "${n=e,a=20,n.length>a?n.slice(0,a)+j.ELLIPSIS:n}"`),r};const Nt=(e,r,n)=>{return t(r)&&(a=r,z.has(a)||qe(r))?{metadataCell:At(r,{...n,width:Xe(10),align:"center"}),width:10}:e?{metadataCell:$t(String(e),{width:Xe(20),align:"right",font:e=>Font.thinSystemFont(e),fontSize:15}),width:20}:{metadataCell:null,width:0};var a};var Bt=({icon:e,text:t,metadata:r,metadataIcon:n,...a})=>{const{metadataCell:o,width:i}=Nt(r,n,a),s=it([e&&At(e,{align:"center",width:Xe(10)}),$t(t,{width:Xe(100-(e?10:0)-i)}),o],{paddingTop:10,paddingBottom:10,...a});return s.setDescription(`THREECOL > text: "${t}"`),s};const qt=[{flavor:"secondary",screenMode:"LIGHT"},{flavor:"transparent",screenMode:"ALL"}],Ht=e=>{const t=Device.isUsingDarkAppearance()?"DARK":"LIGHT";return qt.some((r=>r.flavor===e&&("ALL"===r.screenMode||r.screenMode===t)))},Ut={isFaded:!0,onTap:void 0,onDoubleTap:void 0,onTripleTap:void 0,dismissOnTap:!1};var Wt=({icon:e,text:t,isDisabled:r,isLarge:n,containerStyle:a,flavor:o="secondary",...i})=>{const s=(({userStyle:e,isDisabled:t,isLarge:r,flavor:n})=>({...Ct().button[r?"large":"default"],...n&&Ct().flavors[n],...e,...t&&Ut}))({userStyle:i,isDisabled:r,isLarge:n,flavor:o}),l=i.bgColor??s.bgColor;if(!l)throw new Error(`No bgColor in Button "${t}". This is a symptom of passed props overwriting its value`);const c=i.color??s.color;if(!c)throw new Error(`No color in Button "${t}". This is a symptom of passed props overwriting its value`);const d=ct([Bt({...s,text:t,metadataIcon:e,borderBottom:0,borderTop:l.hex===I("bg").hex?[1,I("hr")]:0}),gt({from:l,mode:"DOWN",...Ht(o)&&{to:c}})],a);return d.setDescription(`BUTTON > text: "${t}"`),d},jt=(e,t={})=>{const n=new ot(e.filter(r),t);return n.setDescription(`SPAN > children: ${e.length}`),n};const zt={marginBottom:0,marginTop:0,paddingBottom:0,paddingTop:0},Gt=(e,{titleColor:t,icon:r,...n})=>{const a=Ze(n),o=Boolean(a.onTap||a.onDoubleTap||a.onTripleTap),i=r??(o?"ellipsis_circle":null),s=Xe(100-(i?10:0));return it(C([$t(e,{font:e=>Font.boldSystemFont(e),fontSize:25,width:s,color:t}),i&&At(i,{width:Xe(10),isFaded:!0,color:t})]),{...zt,...a})},Kt=(e,{subtitleColor:t,icon:r,...n})=>it([$t(e)],{font:()=>Font.footnote(),color:t,height:14,...zt,...Ze(n)});var Vt=(e,t={})=>{const{subtitle:r,isFaded:n,marginBottom:a,marginTop:o}=t,i=it([Gt(e,t),r&&Kt(r,t)],{marginTop:o,marginBottom:a,isFaded:n,paddingTop:10,paddingBottom:15,...Ze(t)});return i.setDescription(`H1 > title: ${e}`),i};A("gray0","gray1");const Yt=({columns:e,hideColumnNames:t})=>ct([gt({from:I("hr"),mode:"UP",stepOptions:{numShownSteps:3}}),!t&&it(b(e).map((([e,{width:t}])=>$t(e,{width:t}))),{bgColor:I("hr"),font:e=>Font.semiboldSystemFont(e),fontSize:16})]),Jt=({cellValues:e,onTap:t},r)=>ct([jt(b(e).map((([e,t])=>((e,{isRowValueBold:t,width:r})=>$t(e,{width:r,...t&&{font:e=>Font.semiboldSystemFont(e)}}))(t,r[e]))),{fontSize:14})],{onTap:t,paddingTop:5,paddingBottom:5}),Qt=({columns:e,rows:t})=>{return ct((r=t.map((t=>Jt(t,e))),n=ht({marginTop:0,marginBottom:0}),r.length<2?r:r.flatMap(((e,t)=>((e,t)=>e===t.length-1)(t,r)?e:[e,n]))));var r,n};var Xt=e=>(t,r={})=>it(t,{...e,...r});const Zt=async(e,t)=>{console.warn(e);const r=new Alert;r.title=`Error in ${t} (see log)`,r.message=String(e),r.addAction("OK");const a="object"===n(e)&&"stack"in e?e.stack:void 0;Oe({type:"Error",context:t,error:JSON.stringify(e),stacktrace:a}),await r.present()},er=({type:e="button",widthWeight:r=1,align:n="center",onTap:a=(()=>{}),dismissOnTap:o=!1,value:i="",color:s,font:l}={})=>{const c=(()=>{if("image"===e&&!t(i))return UITableCell.image(i);if(!t(i))throw new Error("Trying to pass image into text cell.");return"button"===e?UITableCell.button(i):UITableCell.text(i)})();return c.widthWeight=r,{center:()=>c.centerAligned(),left:()=>c.leftAligned(),right:()=>c.rightAligned()}[n](),c.dismissOnTap=o,c.onTap=async()=>{try{await a()}catch(e){await Zt(e,`table cell with label "${String(i)}"`)}},s&&(c.titleColor=s),l&&(c.titleFont=l),c},tr=(()=>{let e=0;const t=new Timer;return r=>{t.timeInterval=W("ON_TAP_CLICK_INTERVAL");const n=Math.max(...Object.keys(r).map((e=>Number.parseInt(e,10))));e++,t.invalidate();const a=async()=>{try{const t=r[e];if(!t)throw new d("Action at index not found",{tapCount:e,maxClicks:n,clickKeysPassed:Object.keys(r)});e=0,await t()}catch(e){Zt(e,"table row")}};n<=e?a():t.schedule(a)}})(),rr=({cells:e=[],height:t,isHeader:r=!1,onTap:n=(()=>{}),onDoubleTap:a,onTripleTap:o,overrideClickMap:i,dismissTableOnTap:s=!1,bgColor:l}={})=>{const c=new UITableRow;if(c.isHeader=r,c.dismissOnSelect=s,c.onSelect=()=>tr(i??{1:n,...a&&{2:a},...o&&{3:o}}),t&&(c.height=t),l&&(c.backgroundColor=l),e.length>0)for(const t of e)c.addCell((d=t,Boolean(Object.keys(d).length>0&&!("type"in d))?t:er(t)));var d;return c};class nr{register={connected$Poller:{},payload$:{},persistedState$Poller:{},syncedPersistedState:{},iconPreloading:{}};set(e,t,r){this.register[e].start=t,this.register[e].cleanup=r}start(e){this.register[e].start?.()}cleanupAll(){for(const{cleanup:e}of Object.values(this.register))e?.()}}class ar{table;payload$;connected$Poller;name;callbackID;isActive=!1;fullscreen;callbackRegister=new nr;syncedPersistedState;beforeLoad;beforeEveryRender;afterPropsLoad;afterFirstRender;onSecondRender;connected$;has;renderCount;defaultState;loadProps;getRows;onDismiss;onConnected$Update;constructor({name:e,showSeparators:t=!1,fullscreen:r=!1,beforeEveryRender:n,payload$:a,syncedPersistedState:o,connected$:i}){if(this.table=new UITable,this.table.showSeparators=t,this.name=e,this.fullscreen=r,this.syncedPersistedState=o,this.beforeEveryRender=n,this.payload$=a,this.connected$=i,this.has={state:Boolean(o),props:!1,runPrerenderCallbacks:!1},this.renderCount="NONE",this.callbackID=`Table: ${e}`,i){const e=(({$:e,...t},r)=>{let n=!1;const a=UUID.string();return e.registerUpdateCallback({callback:()=>n=!0,callbackId:a}),{timer:new Ae({...t,onFire:()=>{n&&(n=!1,r())}}),cleanup:()=>e.unregisterUpdateCallback(a)}})(i,(()=>{const e=i.$.getData();this.payload$.updateData((({connected$ChangeCount:e,...t})=>({connected$ChangeCount:(e||0)+1,...t}))),this.onConnected$Update?.(e)}));this.connected$Poller=e.timer,this.callbackRegister.set("connected$Poller",(()=>this.connected$Poller.start()),(()=>{this.connected$Poller.stop(),e.cleanup()}))}this.callbackRegister.set("payload$",(()=>this.payload$.registerUpdateCallback({callback:()=>this.renderTable(),callbackId:this.callbackID})),(()=>{this.payload$.unregisterUpdateCallback(this.callbackID),this.payload$.setData({},{suppressChangeTrigger:!0})})),this.callbackRegister.set("syncedPersistedState",(()=>this.syncedPersistedState?.cache$.registerUpdateCallback({callbackId:this.callbackID,callback:e=>this.payload$.updateAttr("state",e.data)})),(()=>this.syncedPersistedState?.cache$.unregisterUpdateCallback(this.callbackID)));const{preloadIcons:s,haltIconPreload:l}=Pt((()=>this.isActive&&this.renderTable()));this.callbackRegister.set("iconPreloading",s,l)}isTableActive(){return this.isActive}setState(e){const t=this.payload$.getData().state;if(!t)throw new Error("Setting state without initialized state");const r={...t,...e};this.payload$.updateAttr("state",r),this.syncedPersistedState?.reduce((e=>({...e,...r})))}setRenderOpts({loadProps:e,render:t,defaultState:r,onDismiss:n,beforeLoad:a,afterPropsLoad:o,afterFirstRender:i,onSecondRender:s,onConnected$Update:l,shouldPreloadIcons:c}){this.has.state=this.has.state||Boolean(r),this.has.props=Boolean(e||this.connected$),this.defaultState=r,this.loadProps=e,this.getRows=t,this.onDismiss=n,this.beforeLoad=a,this.afterPropsLoad=o,this.afterFirstRender=i,this.onSecondRender=s,this.onConnected$Update=l,this.isActive=!1,this.has.runPrerenderCallbacks=!1,this.renderCount="NONE",c&&this.callbackRegister.start("iconPreloading")}async initProps(){const e=await(this.loadProps?.());e&&(this.payload$.updateAttr("ownProps",e,{suppressChangeTrigger:!0}),await(this.afterPropsLoad?.()))}async beforeRender(){if(this.has.runPrerenderCallbacks)return;if(this.has.runPrerenderCallbacks=!0,await(this.beforeLoad?.()),await this.initProps(),this.callbackRegister.start("payload$"),!this.syncedPersistedState&&!this.defaultState)return;this.syncedPersistedState&&this.callbackRegister.start("persistedState$Poller");const e=await(this.syncedPersistedState?.getData())??this.defaultState;this.payload$.updateAttr("state",e,{suppressChangeTrigger:!0})}incrementRenderCount(){switch(this.renderCount){case"NONE":this.renderCount="ONCE";break;case"ONCE":this.renderCount="MANY"}}async runOnRenderCount(e,t){this.renderCount===e&&await(t?.())}async cleanup(){this.isActive=!1,await(this.onDismiss?.()),this.callbackRegister.cleanupAll()}async renderTable(){try{if(await this.beforeRender(),await(this.beforeEveryRender?.()),await this.runOnRenderCount("ONCE",this.onSecondRender),!this.getRows)throw new Error("`beforeRender` must be called first");if(((e,t)=>{e.removeAllRows();for(const r of t)if(r instanceof at){const t=r.render();for(const r of t)e.addRow(rr(r))}else e.addRow(r);e.reload()})(this.table,this.getRows().flat().filter(r)),await this.runOnRenderCount("NONE",this.afterFirstRender),this.incrementRenderCount(),!this.isActive){this.isActive=!0,this.callbackRegister.start("connected$Poller"),await this.table.present(this.fullscreen);const e=this.payload$.getData().state;return await this.cleanup(),e}}catch(e){await(async(e,t)=>{console.warn(e),await ve({title:`Error encountered in ${t} render`,message:String(e),buttons:{OK:{}}})})(e,this.name)}}}const or=e=>{const t=new ee({name:`table: ${e.name}`,defaultState:{}}),r=new ar({...e,payload$:t}),n=()=>{const{state:e}=t.getData();if(!e)throw new Error("Getting state with no state present");return e},a=()=>{const{ownProps:r}=t.getData(),n=e.connected$,a=n?.$.getData(),o={...r,...a};if(!o)throw new Error("Getting props with no props present");return o},o=e=>r.setState(e),i=e=>{const t=e(n());null!=t&&o(t)},s=()=>r.renderTable();return{present:e=>(r.setRenderOpts(e),r.renderTable()),rerender:s,connect:e=>(...t)=>e({state:r.has.state?n():void 0,getProps:r.has.props?a:void 0,setState:o,updateState:i,rerender:s},...t),payload$:t,setState:o,updateState:i,getState:n,getProps:a,isTableActive:()=>r.isTableActive()}},ir={sm:5,md:10,lg:15},sr={sm:16,md:20,lg:22},lr={sm:"4%",md:"5%",lg:"7%"},cr={selected:A("gray1","gray7"),callout:I("secondaryTextColor")},dr=(e,r,n)=>{const a=t(o=e)&&["lg","md","sm"].includes(o)?r[e]:e;var o;return(e=>t(e)&&e.includes("%"))(a)?((e,t="notFullscreen")=>{const r=e.split("%")[0];if(!r)throw new Error(`Incorrectly formatted percent value: ${e}`);const n=Number.parseInt(r,10);if(n<1||n>100)throw new Error(`Percent value must be between 1-100: ${e}`);const a=n/100;return Math.floor(a*De(t))})(a,n):a},hr=e=>({paddingTop:dr(e?.paddingTop??"sm",ir),paddingBottom:dr(e?.paddingBottom??"sm",ir)}),ur=({padding:e,rowHeight:t="sm",mode:r})=>({padding:hr(e),rowHeight:dr(t,lr,r)}),gr=e=>t(e)?cr[e]:e,pr=({iconKey:r,text:n,isEmpty:a,image:o,color:i=I("primaryTextColor"),fontConstructor:s=(e=>Font.regularRoundedSystemFont(e)),textSize:l="sm",align:c="left",width:h},u)=>{const g={widthWeight:h,align:c},p=((e,{isFaded:t})=>t?new Color(e.hex,.6):e)(i,u);if(r)return er({type:"image",value:Mt(r,p),...g});if(o)return er({type:"image",value:o,...g});if(void 0!==n||a)return er({type:"text",value:e(n)||t(n)?String(n):"",color:p,font:s(dr(l,sr)),...g});throw new d("Cell configuration is invalid",{iconKey:r,text:n,isEmpty:a,hasImage:Boolean(o)})},mr=(e,t,r)=>rr({cells:[pr({isEmpty:!0},t)],...r,height:e});var fr=(e={})=>{const t=(({bgColor:e=I("bg"),rowHeight:t,padding:r,mode:n,content:a=[],...o})=>({...o,content:a,bgColor:gr(e),...ur({padding:r,rowHeight:t,mode:n})}))(e),n=m(t.content,u(g((e=>pr(e,t))),(a=r,e=>(t,r,n)=>a(r,n)?e(t,r,n):t)));var a;const{bgColor:o,padding:i,rowHeight:s,dismissOnTap:l,onTap:c,onDoubleTap:d,onTripleTap:h}=t,p={onTap:c,onDoubleTap:d,onTripleTap:h,dismissTableOnTap:l,bgColor:o};return C([i.paddingTop&&mr(i.paddingTop,t,p),rr({cells:n.length>0?n:[er()],height:s,...p}),i.paddingBottom&&mr(i.paddingBottom,t,p)]).flat()};var br=({rowHeight:e=15,...t}={})=>fr({rowHeight:e,padding:{paddingTop:0,paddingBottom:0},...t});I("green_l2");const wr=e=>(t={})=>{const r=e(t);return r&&fr(r(t))},yr={padding:{paddingTop:0,paddingBottom:0}};const Sr={gutterLeft:"center",main:"left",gutterRight:"right"},_r=(e,t,r)=>({...e,width:r[t],align:Sr[t]});var Cr=wr((e=>{const{gutterLeft:t,main:r,gutterRight:n}=e;return a=>{const o=(({gutterLeft:e,gutterRight:t})=>{const r=(e&&1)??0,n=(t&&2)??0;return{gutterLeft:r,main:12-r-n,gutterRight:n}})(e);return{...a,content:C([t&&_r(t,"gutterLeft",o),_r(r,"main",o),n&&_r(n,"gutterRight",o)])}}}));var Tr=wr((({gutterLeft:e,main:t})=>r=>({...r,content:[{...e,width:1,align:"center"},{...t,width:11,align:"left"}]}))),Dr=({icon:e,color:t,text:r,metadata:n,textSize:a,fontConstructor:o,...i})=>n?Cr({gutterLeft:{iconKey:e,color:t},main:{text:r,color:t,fontConstructor:o,textSize:a},gutterRight:{text:n,color:t},...i}):Tr({gutterLeft:{iconKey:e,color:t},main:{text:r,color:t,fontConstructor:o,textSize:a},...i});const{present:kr,connect:vr}=or({name:"presetDateTime"}),Er=e=>{const t=new Date,r=t.getHours(),n=((e=new Date,{hours:t=0,minutes:r=0,seconds:n=0,ms:a=0}={})=>{const o=new Date(e);return o.setHours(t,r,n,a),o})(t);return X(n,{days:r<e?0:1,hours:e})};vr((({setState:e})=>Wt({text:"Choose date & time",icon:"calendar",dismissOnTap:!0,onTap:()=>e({result:"CHOOSE_SPECIFIC"})}))),vr((({setState:e},{label:t,icon:r,targetHourOfDay:n})=>Tr({gutterLeft:{iconKey:r},main:{text:t,textSize:"md"},padding:{paddingBottom:"md",paddingTop:"md"},rowHeight:"md",dismissOnTap:!0,onTap:()=>e({result:Er(n)})})));const{present:Rr,connect:xr,getProps:Fr,getState:Or}=or({name:"pickRelativeDate"}),Mr=e=>{const t=new Date,r=V(t,e),n=V(X(t,{days:1}),e),a=((e,t,r)=>t?"Today":r?"Tomorrow":Q(e,"DDDMMMDD"))(e,r,n);return{dateStr:a,incrementStr:r||n?null:`${e>t?"+":""}${G(e,t)}`}},Pr=e=>{const{minimumDate:t,daysToInclude:r}=Fr(),n=t?(a=t,o=e,new Date(Math.max(a.getTime(),o.getTime()))):e;var a,o;return f(0,r-1).map((e=>X(n,{days:e})))},Ir=({goBack:e})=>{const{startDate:t}=Or(),{daysToInclude:r}=Fr();return X(t,{days:(e?-1:1)*r})};xr((()=>{const{title:e,message:t}=Fr();return Vt(e,{...t&&{subtitle:t}})})),xr((({setState:e})=>{const{allowTimeSelection:t}=Fr();return Wt({text:t?"Choose date & time":"Use date picker",icon:"calendar",dismissOnTap:!0,onTap:()=>e(t?{useSpecificDateTimePicker:!0}:{useDatePicker:!0})})}));const Ar=()=>(({dim:e=0,padding:{paddingBottom:t=0,paddingTop:r=0}={paddingBottom:0,paddingTop:0},color:n=I("hr"),height:a=1}={})=>C([r&&fr({rowHeight:r,...yr}),fr({rowHeight:a,bgColor:c(n,e),...yr}),t&&fr({rowHeight:t,...yr})]).flat())({dim:.4}),Lr=({text:e,icon:t,onTap:r,isFaded:n=!1})=>[Wt({icon:t,text:e,isFaded:n,onTap:r}),Ar()].flat();xr((({setState:e})=>{const t=!(()=>{const{minimumDate:e}=Fr();return!e||Or().startDate.getTime()>e.getTime()})();return Lr({text:"Earlier",icon:"arrow_left",onTap:()=>!t&&e({startDate:Ir({goBack:!0})}),isFaded:t})})),xr((({setState:e})=>Lr({text:"Later",icon:"arrow_right",onTap:()=>e({startDate:Ir({goBack:!1})})})));const $r=xr((({setState:e},t)=>{const{dateStr:r,incrementStr:n}=Mr(t);return[Dr({text:r,metadata:n||" ",icon:"calendar",onTap:()=>e({chosenDate:t}),dismissOnTap:!0}),Ar()].flat()}));xr((({state:{startDate:e}})=>Pr(e).flatMap($r)));const{deep_blue:Nr,domain_personal:Br,domain_work:qr,gray0:Hr,gray2:Ur,gray8:Wr,green_l4:jr,green:zr,primaryTextColor:Gr,red_d1:Kr,red_l4:Vr,yellow_d2:Yr,yellow_l3:Jr}=L();A(Hr,Wr),A(Hr,Wr);const{getState:Qr,setState:Xr,present:Zr,connect:en}=or({name:"chooseColor"}),tn=(({preReducers:e=[],postReducers:t=[]}={})=>r=>(...n)=>v(...e,(e=>r(e,...n)),...t))(),rn=((e,t,{onStateUpdate:r}={})=>n=>async(...a)=>{const o=e(),i=(await n(...a))(o);t(i),await(r?.(i))})(Qr,Xr),nn=rn(tn(((e,t)=>({...e,selectedColor:t})))),an=M.map((e=>{const r=t(e)?P(e):e;return x(r)?r:new E({label:t(e)?e:UUID.string(),staticColor:r})})),on=(e,t,r,n)=>{const{color:a,label:o,isDynamic:i}=e;return fr({content:[{text:C([o,i&&"(dynamic)"]," "),color:t}],bgColor:a,rowHeight:30,dismissOnTap:n,onTap:r})};en((()=>an.flatMap((e=>(({colorData:e,onTap:t,dismissOnTap:r=!1})=>[on(e,I("white"),t,r),on(e,I("black"),t,r)].flat())({colorData:e,onTap:()=>nn(e),dismissOnTap:!0})))));["window.addEventListener("," 'click',"," event => {","   const closestLink = event.target && event.target.closest('a');","   if (!closestLink) return;","   event.preventDefault();","   const url = closestLink.getAttribute('href');","   window.location.href = url;"," },"," true",");"].map((e=>e.trim())).join(""),new ee({name:"webview passedData$",defaultState:{},showStreamDataUpdateDebug:!1});const sn=e=>`${e}px`;I("bg").hex,I("primaryTextColor").hex,sn(10),I("deep_blue_l1").hex,sn(26),sn(4),sn(50),sn(50),L();const ln={System:{100:e=>Font.ultraLightSystemFont(e),200:e=>Font.thinSystemFont(e),300:e=>Font.lightSystemFont(e),400:e=>Font.regularSystemFont(e),500:e=>Font.mediumSystemFont(e),600:e=>Font.semiboldSystemFont(e),700:e=>Font.boldSystemFont(e),800:e=>Font.heavySystemFont(e),900:e=>Font.blackSystemFont(e)},Monospaced:{100:e=>Font.ultraLightMonospacedSystemFont(e),200:e=>Font.thinMonospacedSystemFont(e),300:e=>Font.lightMonospacedSystemFont(e),400:e=>Font.regularMonospacedSystemFont(e),500:e=>Font.mediumMonospacedSystemFont(e),600:e=>Font.semiboldMonospacedSystemFont(e),700:e=>Font.boldMonospacedSystemFont(e),800:e=>Font.heavyMonospacedSystemFont(e),900:e=>Font.blackMonospacedSystemFont(e)},Rounded:{100:e=>Font.ultraLightRoundedSystemFont(e),200:e=>Font.thinRoundedSystemFont(e),300:e=>Font.lightRoundedSystemFont(e),400:e=>Font.regularRoundedSystemFont(e),500:e=>Font.mediumRoundedSystemFont(e),600:e=>Font.semiboldRoundedSystemFont(e),700:e=>Font.boldRoundedSystemFont(e),800:e=>Font.heavyRoundedSystemFont(e),900:e=>Font.blackRoundedSystemFont(e)}};or({name:"chooseFontFamily"}),or({name:"font viewer"}),new ee({name:"robustCleanup$",defaultState:{status:"READY",numFailures:0,numRemainingTmpFiles:0,numDownloaded:0,numRemoved:0}}),Xt({font:(({family:e,size:t,weight:r=400})=>{const n=ln[e][r];return t?n(t):n})({family:"System",weight:600})});class cn{constructor(){this.fileManager=FileManager.iCloud()||FileManager.local(),this.documentsDirectory=this.fileManager.documentsDirectory()}async readJSON(e){try{if(await this.ensureExists(e)){const t=this.fileManager.readString(e);return JSON.parse(t)}}catch(e){this.handleError(e)}}async saveJSON(e,t,r){try{const n=JSON.stringify(t,null,2);if(await this.createDirectoryFromFilePath(e),!r)return this.fileManager.writeString(e,n),n;const a=this.fileManager.fileName(e),o=this.fileManager.fileExtension(e),i=r(a)+o,s=e.replace(o,i);return this.fileManager.writeString(s,n),n}catch(e){throw this.handleError(e)}}joinDocumentPaths(e,t){let r;if(r="string"==typeof e?this.fileManager.joinPath(this.documentsDirectory,e):e.reduce(((e,t)=>this.fileManager.joinPath(e,t)),this.documentsDirectory),t){r+=t.startsWith(".")?t:`.${t}`}return r}async createDirectoryFromFilePath(e,t=!0){if(await this.ensureExists(e))return e;const r=this.fileManager.fileName(e,!0),n=e.replace(r,"").replace(this.documentsDirectory,"");return await this.createDirectory(n,t),e}async createDirectory(e,t){try{const r=this.fileManager.joinPath(this.documentsDirectory,e);if(await this.ensureExists(r)){if(this.fileManager.isDirectory(r))return r;throw new Error("A file with the same name already exists.")}return this.fileManager.createDirectory(r,t),r}catch(e){throw this.handleError(e)}}async ensureExists(e){if(!this.fileManager.fileExists(e))return!1;if(this.fileManager.isFileDownloaded(e)||await this.fileManager.downloadFileFromiCloud(e),this.fileManager.isFileDownloaded(e))return!0;throw new Error("Unable to download file.")}handleError(e){return e instanceof Error?new Error(e.message):new Error(String(e))}}const{present:dn,connect:hn,setState:un}=or({name:"Example table"}),gn=hn((({state:{toneOfVoice:e}})=>Vt("friendly"===e?"Hello world!":"What do you want"))),pn=hn((({state:{toneOfVoice:e}})=>Wt({text:"friendly"===e?"Try another tone of voice!":"Ugh, fine, click me",icon:"cycle",flavor:"primary",onTap:()=>un({toneOfVoice:"friendly"===e?"off-putting":"friendly"})}))),mn=hn((({state:{toneOfVoice:e}})=>it([$t("friendly"===e?"Well hello there! Thanks for stopping by, this is my table, would you like to take a seat?":"Everyone always clicks me. I don't like it. Would you like it if I walked up to you and clicked you?")],{height:100}))),fn=hn((({state:{toneOfVoice:e}})=>(({columns:e,rows:t,containerStyle:r,hideColumnNames:n})=>ct([Yt({columns:e,hideColumnNames:n}),Qt({columns:e,rows:t}),gt({from:I("hr"),mode:"DOWN",stepOptions:{numShownSteps:5}})],{marginTop:10,marginBottom:10,...r}))({columns:{key:{isRowValueBold:!0},val:{}},rows:[{cellValues:{key:"Tone of voice",val:e}},{cellValues:{key:"Mood",val:"friendly"===e?"Excited!":"Disillusioned"}}],hideColumnNames:!0})));(async()=>{const e=new cn;await e.createDirectory("store/img/sfsymbols",!0),dn({defaultState:{toneOfVoice:"friendly"},render:()=>[gn(),pn(),br(),fn(),mn()]})})();
